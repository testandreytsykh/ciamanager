<project default='profilesPackageXmlMerge'>
  <import file='../ant-includes/setup-target.xml' />
  <target name='profilesPackageXmlMerge'>
    <mkdir dir='build/metadata/profiles' />
    <parallel threadCount='4'>
      <sequential>
        <echo>Xml Merging: Admin.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Admin.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Admin.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Analytics Cloud Integration User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Analytics Cloud Integration User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Analytics Cloud Integration User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Analytics Cloud Security User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Analytics Cloud Security User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Analytics Cloud Security User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Authenticated Website.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Authenticated Website.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Authenticated Website.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Chatter External User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Chatter External User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Chatter External User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Chatter Free User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Chatter Free User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Chatter Free User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Chatter Moderator User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Chatter Moderator User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Chatter Moderator User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: ContractManager.profile</echo>
        <xmlmerge dest='build/metadata/profiles/ContractManager.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/ContractManager.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Cross Org Data Proxy User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Cross Org Data Proxy User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Cross Org Data Proxy User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Custom%3A Marketing Profile.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Custom%3A Marketing Profile.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Custom%3A Marketing Profile.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Custom%3A Sales Profile.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Custom%3A Sales Profile.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Custom%3A Sales Profile.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Custom%3A Support Profile.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Custom%3A Support Profile.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Custom%3A Support Profile.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Customer Community Login User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Customer Community Login User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Customer Community Login User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Customer Community Plus Login User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Customer Community Plus Login User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Customer Community Plus Login User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Customer Community Plus User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Customer Community Plus User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Customer Community Plus User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Customer Community User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Customer Community User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Customer Community User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Customer Portal Manager Custom.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Customer Portal Manager Custom.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Customer Portal Manager Custom.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Customer Portal Manager Standard.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Customer Portal Manager Standard.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Customer Portal Manager Standard.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: External Identity User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/External Identity User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/External Identity User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Force%2Ecom - App Subscription User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Force%2Ecom - App Subscription User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Force%2Ecom - App Subscription User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Force%2Ecom - Free User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Force%2Ecom - Free User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Force%2Ecom - Free User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Gold Partner User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Gold Partner User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Gold Partner User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: High Volume Customer Portal User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/High Volume Customer Portal User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/High Volume Customer Portal User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: HighVolumePortal.profile</echo>
        <xmlmerge dest='build/metadata/profiles/HighVolumePortal.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/HighVolumePortal.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Identity User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Identity User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Identity User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: MarketingProfile.profile</echo>
        <xmlmerge dest='build/metadata/profiles/MarketingProfile.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/MarketingProfile.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Partner App Subscription User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Partner App Subscription User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Partner App Subscription User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Partner Community Login User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Partner Community Login User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Partner Community Login User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Partner Community User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Partner Community User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Partner Community User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: PlatformPortal.profile</echo>
        <xmlmerge dest='build/metadata/profiles/PlatformPortal.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/PlatformPortal.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: ReadOnly.profile</echo>
        <xmlmerge dest='build/metadata/profiles/ReadOnly.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/ReadOnly.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Silver Partner User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Silver Partner User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Silver Partner User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: SolutionManager.profile</echo>
        <xmlmerge dest='build/metadata/profiles/SolutionManager.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/SolutionManager.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Standard.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Standard.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Standard.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: StandardAul.profile</echo>
        <xmlmerge dest='build/metadata/profiles/StandardAul.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/StandardAul.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
      <sequential>
        <echo>Xml Merging: Work%2Ecom Only User.profile</echo>
        <xmlmerge dest='build/metadata/profiles/Work%2Ecom Only User.profile' conf='xmlmerge.properties'>
          <fileset dir='build/profile-packages-metadata'>
            <include name='**/Work%2Ecom Only User.profile' />
          </fileset>
        </xmlmerge>
      </sequential>
    </parallel>
    <copy todir='build/metadata'>
      <fileset dir='build/profile-packages-metadata'>
        <include name='**/classes/*' />
        <include name='**/pages/*' />
        <include name='**/applications/*' />
        <include name='**/objects/*' />
        <include name='**/objectTranslations/*' />
        <include name='**/customPermissions/*' />
        <include name='**/tabs/*' />
        <include name='**/layouts/*' />
        <include name='**/dataSources/*' />
      </fileset>
      <cutdirsmapper dirs='1' />
    </copy>
  </target>
</project>